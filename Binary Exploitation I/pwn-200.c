#include <stdio.h>
#include <stdlib.h>
#include <string.h>

__attribute__((constructor)) void ignore_me() {
    setbuf(stdin, NULL);
    setbuf(stdout, NULL);
    setbuf(stderr, NULL);
}


void display_flag(char* fname) {
    FILE *fp;
    char buff[255];
    fp = fopen(fname, "r");

    if (fp==NULL) {
        printf("<<< Error: %s is not present", fname);
        exit(0);
    }
    else {
        fscanf(fp, "%s", buff);
        printf("<<< Congratulations: %s\n", buff );
    }
}

int login(char *passwd){
  int ret = 0;
  if (strcmp(passwd, "3801") == 0) {
    ret =1;
  }
  return ret;
}

void vuln() {
  char passwd[4]="TEMP";
  char userid[4]="TEMP";
  char input[6];
  printf("Password >>> ");
  gets(input);
  if (login(passwd)) {
      display_flag("flag.txt");
    } 
  else {
      printf("<<< No Flag For You.\n");
    }
} 


int main (int argc, char *argv[])  {
  vuln();
}
