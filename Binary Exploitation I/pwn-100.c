#include <stdio.h>
#include <stdlib.h>
#include <string.h>


__attribute__((constructor)) void ignore_me() {
    setbuf(stdin, NULL);
    setbuf(stdout, NULL);
    setbuf(stderr, NULL);
}


void display_flag(char* fname) {
    FILE *fp;
    char buff[255];
    fp = fopen(fname, "r");

    if (fp==NULL) {
        printf("<<< Error: %s is not present", fname);
        exit(0);
    }
    else {
        fscanf(fp, "%s", buff);
        printf("<<< Congratulations: %s\n", buff );
    }
}

int check_password(char *passwd){
  int ret = 0;
  char buf2[16];
  char buf1[16];
 
  strcpy(buf1, passwd);
  if (strcmp(buf2, "BBBB") == 0) {
    ret =1;
  }
  return ret;
}

void vuln() {
  char input[100];
  puts("Login >>> ");
  gets(input);

  if (check_password(input)) {
      display_flag("flag.txt");
    } 
  else {
      printf("<<< No Flag For You.\n");
    }
} 

int main (int argc, char *argv[]) {
  vuln();
}
